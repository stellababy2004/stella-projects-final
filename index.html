<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stella Barbarella SOC Analyst & Cybersecurity Portfolio</title>
  <meta name="description" content="Cybersecurity Portfolio of Stella Barbarella ‚Äì SOC Analyst, Threat Hunter & Cybersecurity Enthusiast." />
  <meta name="keywords" content="SOC Analyst, Cybersecurity, Threat Hunting, Phishing Detector, Cyber Threat Map, Charts" />
  <link rel="stylesheet" href="styles.css" />

 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>

  <style>
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
      background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
    }
    
    body {
      overflow-x: hidden;
    }
    
    .button {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 18px 24px;
      font-size: 1.3em;
      min-width: 220px;
      min-height: 60px;
      box-sizing: border-box;
      line-height: 1.2;
      white-space: normal; /* allows text wrapping */
      word-break: break-word; /* better text wrapping */
    }
    .button span, .button strong {
      display: block;
      width: 100%;
      text-align: center;
    }
    .button:hover {
      background: rgba(0, 255, 255, 0.1);
      color: #00ffee;
      box-shadow: 0 0 10px #00ffee;
      transition: all 0.3s ease;
    }

    .logo {
      text-align: center;
      margin: 20px 0;
    }
    .qr-code {
      display: block;
      margin: 20px auto;
      max-width: 180px;
      height: auto;
    }
    .section {
      margin: 40px auto;
      max-width: 900px;
      padding: 32px 24px;
      background: rgba(10, 20, 30, 0.92);
      border-radius: 16px;
      box-shadow: 0 0 24px #00ffee33;
    }
    header {
      background: rgba(0, 0, 0, 0.85);
      padding-bottom: 0;
      border-bottom: 2px solid #00ffee;
    }
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0 0 10px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    nav ul.project-links {
      margin-top: 10px;
      margin-bottom: 0;
      gap: 10px;
    }
    nav ul.project-links li {
      display: inline-block;
    }
    @media (max-width: 700px) {
      .section { padding: 18px 4px; }
      .button { min-width: 120px; font-size: 1em; padding: 10px 8px; }
      nav ul { flex-direction: column; gap: 4px; }
    }

    #map {
      width: 100%;
      height: 400px;
      min-height: 300px;
      border: 1px solid #0ff;
      border-radius: 8px;
      margin: 0 auto;
      box-sizing: border-box;
    }
    .leaflet-container {
      background: #101820 !important;
      border-radius: 8px;
    }

    /* Contact Form Styles */
    #contact-form {
      margin-bottom: 30px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group.large {
      margin-bottom: 20px;
    }
    .form-label {
      display: block;
      margin-bottom: 5px;
      color: #00ffee;
    }
    .form-input, .form-textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #00ffee;
      background: rgba(10, 20, 30, 0.8);
      color: #00ffee;
      border-radius: 5px;
      box-sizing: border-box;
    }
    .form-textarea {
      resize: vertical;
    }
    .form-input:focus, .form-textarea:focus {
      outline: none;
      box-shadow: 0 0 5px #00ffee;
    }
    #contact-result {
      margin-bottom: 20px;
      font-weight: bold;
      display: none;
    }
    .contact-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* Attack Simulation Lab Styles */
    #attack-sim {
      position: relative;
    }
    
    #attack-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .attack-button {
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(0, 255, 255, 0.05));
      border: 2px solid #00ffee;
      color: #00ffee;
      padding: 15px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .attack-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.3), transparent);
      transition: left 0.5s ease;
    }
    
    .attack-button:hover::before {
      left: 100%;
    }
    
    .attack-button:hover {
      background: rgba(0, 255, 255, 0.2);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      transform: translateY(-2px);
    }
    
    .attack-button.active {
      background: rgba(0, 255, 255, 0.3);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.7);
    }
    
    #attack-result {
      margin-top: 30px;
      padding: 20px;
      border-radius: 10px;
      background: rgba(10, 20, 30, 0.8);
      border: 1px solid #00ffee;
      display: none;
      animation: slideIn 0.5s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .attack-steps {
      margin-top: 20px;
    }
    
    .attack-step {
      display: flex;
      align-items: center;
      margin: 10px 0;
      padding: 10px;
      background: rgba(0, 255, 255, 0.05);
      border-radius: 5px;
      border-left: 3px solid #00ffee;
      opacity: 0;
      transform: translateX(-20px);
      animation: stepFadeIn 0.5s ease forwards;
    }
    
    .attack-step:nth-child(2) { animation-delay: 0.2s; }
    .attack-step:nth-child(3) { animation-delay: 0.4s; }
    .attack-step:nth-child(4) { animation-delay: 0.6s; }
    .attack-step:nth-child(5) { animation-delay: 0.8s; }
    
    @keyframes stepFadeIn {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .step-icon {
      font-size: 1.5em;
      margin-right: 15px;
      color: #00ffee;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .step-text {
      flex: 1;
    }
    
    .step-status {
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8em;
    }
    
    .status-detecting {
      background: #ffea00;
      color: #000;
    }
    
    .status-blocking {
      background: #ff9100;
      color: #fff;
    }
    
    .status-success {
      background: #00e676;
      color: #000;
    }
    
    .status-alert {
      background: #ff1744;
      color: #fff;
    }
    
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(0, 255, 255, 0.2);
      border-radius: 3px;
      margin-top: 15px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00ffee, #00ff88);
      border-radius: 3px;
      width: 0%;
      animation: progressFill 3s ease forwards;
    }
    
    @keyframes progressFill {
      to { width: 100%; }
    }

    .attack-icon {
      font-size: 1.5em;
      display: block;
      margin-bottom: 5px;
    }

    /* Language Switcher Styles */
    .language-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(10, 20, 30, 0.9);
      border: 2px solid #00ffee;
      border-radius: 10px;
      padding: 10px;
      backdrop-filter: blur(10px);
    }
    
    .language-switcher select {
      background: rgba(0, 255, 255, 0.1);
      border: 1px solid #00ffee;
      color: #00ffee;
      padding: 8px 12px;
      border-radius: 5px;
      font-size: 0.9em;
      cursor: pointer;
      outline: none;
    }
    
    .language-switcher select:hover {
      background: rgba(0, 255, 255, 0.2);
      box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
    }
    
    .language-switcher select option {
      background: #0a141e;
      color: #00ffee;
    }
    
    .language-switcher label {
      color: #00ffee;
      font-size: 0.8em;
      margin-right: 8px;
    }

    /* AI Chat Styles */
    #ai-chat {
      position: relative;
    }

    #chat-container {
      background: rgba(10, 20, 30, 0.9);
      border: 2px solid #00ffee;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    #chat-form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      align-items: center;
    }

    #chat-prompt {
      flex: 1;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #00ffee;
      color: #00ffee;
      padding: 10px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }

    #chat-prompt:focus {
      outline: none;
      box-shadow: 0 0 10px rgba(0, 255, 238, 0.5);
    }

    #chat-prompt::placeholder {
      color: rgba(0, 255, 238, 0.5);
    }

    #chat-form button {
      background: linear-gradient(45deg, #00ffee, #0066cc);
      border: none;
      color: #000;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    #chat-form button:hover {
      background: linear-gradient(45deg, #00ff88, #0088ff);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 255, 238, 0.3);
    }

    #chat-messages {
      max-height: 400px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(0, 255, 238, 0.3);
      border-radius: 8px;
      padding: 15px;
    }

    .chat-message {
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      background: rgba(0, 255, 238, 0.1);
      border-left: 3px solid #00ffee;
    }

    .chat-message.user {
      background: rgba(0, 255, 136, 0.1);
      border-left-color: #00ff88;
      margin-left: 20px;
    }

    .chat-message.assistant {
      background: rgba(0, 255, 238, 0.1);
      border-left-color: #00ffee;
      margin-right: 20px;
    }

    .message-content {
      font-family: 'Courier New', monospace;
      line-height: 1.4;
      white-space: pre-wrap;
      color: #fff;
    }

    .message-header {
      font-size: 0.8em;
      color: #00ffee;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .typing-indicator {
      display: inline-block;
      color: #ffea00;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @media (max-width: 600px) {
      #chat-form {
        flex-direction: column;
        gap: 10px;
      }
      
      #chat-form button {
        width: 100%;
      }
    }
  </style>
</head>
<body id="top">
  <!-- Language Switcher -->
  <div class="language-switcher">
    <label for="language-select">üåç</label>
    <select id="language-select">
      <option value="en">English</option>
      <option value="fr">Fran√ßais</option>
      <option value="bg">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</option>
    </select>
  </div>
  
  <div id="particles-js"></div>
  <header>
    <nav>
      <ul>
        <li><a href="#about" class="button" data-translate="nav-about">About Me</a></li>
        <li><a href="#projects" class="button" data-translate="nav-projects">Projects</a></li>
        <li><a href="#chart" class="button" data-translate="nav-charts">Charts</a></li>
        <li><a href="#ai-chat" class="button" data-translate="nav-aichat">ü§ñ AI Chat</a></li>
        <li><a href="attack-sim.html" class="button">AttackSim</a></li>
        <li><a href="#map-section" class="button" data-translate="nav-livemap">Live Map</a></li>
        <li><a href="#testimonials" class="button" data-translate="nav-testimonials">Testimonials</a></li>
        <li><a href="#contact" class="button" data-translate="nav-contact">Contact</a></li>
      </ul>
      <ul class="project-links">
        <li>
          <a class="button" href="penetration_test_report_acme_en.pdf" target="_blank" download>
            <span data-translate="nav-report">üìÑ Report (EN ‚Äì PDF)</span>
          </a>
        </li>
        <li>
          <a href="presentation.html" target="_blank" class="button">
            <span data-translate="nav-presentation">üìä View Pentest Presentation</span>
          </a>
        </li>
      </ul>
      <div class="logo">
        <img src="images/logo.png" alt="Stella Barbarella Logo" style="max-width:180px; height:auto;" />
      </div>
    </nav>
  </header>

  <main>
    <section class="section" id="about">
      <h1>Stella Barbarella</h1>
      <p data-translate="about-description">SOC Analyst | Cybersecurity Enthusiast | Threat Hunter</p>
    </section>

    <section class="section" id="projects">
      <h2 data-translate="projects-title">Projects</h2>
      <ul class="project-list">
        <li><a href="cyber-threat-map.html" class="button" data-translate="project-threatmap">üîç Cyber Threat Map</a></li>
        <li><a href="phishing-check.html" class="button" data-translate="project-phishing">üìß Check for Phishing</a></li>
        <li><a href="threat-hunting.html" class="button" data-translate="project-hunting">üß† Threat Hunting</a></li>
        <li><a href="#checkpoint-map" class="button" data-translate="project-live">üåê Threat Live</a></li>
        <li><a href="Stella_Barbarella_CV.odt" download class="button" data-translate="project-cv">üìÑ My CV</a></li>
      </ul>
    </section>    <section class="section" id="phishing-check">
      <h2 data-translate="phishing-title">Phishing URL Checker</h2>
      <form id="phishing-form">
        <label for="url" data-translate="phishing-label">Enter URL to check:</label>
        <input type="text" id="url" name="url" placeholder="https://example.com" required />

        <button type="submit" data-translate="phishing-button">Check</button>
      </form>
      <div id="phishing-result" style="margin-top: 10px; font-weight: bold;"></div>
      <img src="images/logo.png" alt="Stella Barbarella Logo" style="max-width:180px; height:auto;" loading="lazy" />
      <p style="font-size: 0.9em; color: gray; margin-top: 5px;" data-translate="phishing-note">
        Note: This is a simulation and does not perform actual phishing detection.
      </p>
    </section>
  
    <section class="section" id="pentest-reports">
      <h2>Pentest Reports</h2>
      <p class="pentest-intro">
        Explore real-world pentest deliverables from <strong>Stella Barbarella</strong>.
      </p>
      <ul>
    
      </ul>
    </section>

    <section class="section" id="log-analyzer">
      <h2>Live Log Analyzer</h2>
      <button id="toggle-logs">‚è∏ Pause Logs</button>
      <pre id="log-output" style="background:#111; color:#00ffee; padding:10px; min-height:120px; border-radius:8px; margin-top:10px; max-height:200px; overflow:auto;"></pre>
    </section>

    <section class="section" id="attack-sim">
      <h2 data-translate="lab-title">üî¨ Attack Simulation Lab</h2>
      <p data-translate="lab-description">–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø –∞—Ç–∞–∫–∞ –∑–∞ —Å–∏–º—É–ª–∞—Ü–∏—è –∏ –Ω–∞–±–ª—é–¥–∞–≤–∞–π—Ç–µ –∫–∞–∫ SOC –µ–∫–∏–ø—ä—Ç —è –æ—Ç–∫—Ä–∏–≤–∞ –∏ –±–ª–æ–∫–∏—Ä–∞:</p>
      
      <div id="attack-buttons">
        <button class="attack-button" data-attack="phishing">
          <span class="attack-icon">üìß</span><br>
          <strong>Phishing</strong><br>
          <small data-translate="lab-phishing-desc">–§–∏—à–∏–Ω–≥ –∞—Ç–∞–∫–∞</small>
        </button>
        <button class="attack-button" data-attack="brute-force">
          <span class="attack-icon">üîì</span><br>
          <strong>Brute Force</strong><br>
          <small data-translate="lab-bruteforce-desc">–ë—Ä—É—Ç —Ñ–æ—Ä—Å –∞—Ç–∞–∫–∞</small>
        </button>
        <button class="attack-button" data-attack="malware">
          <span class="attack-icon">ü¶†</span><br>
          <strong>Malware</strong><br>
          <small data-translate="lab-malware-desc">–ó–ª–æ–Ω–∞–º–µ—Ä–µ–Ω —Å–æ—Ñ—Ç—É–µ—Ä</small>
        </button>
        <button class="attack-button" data-attack="ddos">
          <span class="attack-icon">‚ö°</span><br>
          <strong>DDoS</strong><br>
          <small data-translate="lab-ddos-desc">–†–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∞—Ç–∞–∫–∞</small>
        </button>
      </div>
      
      <div id="attack-result">
        <h3 id="attack-title"></h3>
        <div id="attack-description"></div>
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <div class="attack-steps" id="attack-steps"></div>
      </div>
    </section>

    <section class="section" id="ai-chat">
      <h2 data-translate="aichat-title">ü§ñ CyberSec AI Chat</h2>
      <p data-translate="aichat-description">–ü–æ–ø–∏—Ç–∞–π –Ω–∞—à–∏—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ –∫–∏–±–µ—Ä—Å–∏–≥—É—Ä–Ω–æ—Å—Ç —Ç–µ–º–∏, –∑–∞–ø–ª–∞—Ö–∏ –∏ –Ω–∞–π-–¥–æ–±—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.</p>
      
      <div id="chat-container">
        <form id="chat-form">
          <input type="text" id="chat-prompt" placeholder="Ask something..." required />
          <button type="submit" data-translate="aichat-send">Send</button>
        </form>
        
        <div id="chat-messages">
          <div id="chat-response" class="chat-message">
            <div class="message-content">
              <span data-translate="aichat-welcome">Ask our AI assistant about cybersecurity topics, threats, and best practices.</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="testimonials">
      <h2>Testimonials</h2>
      <p>"Stella's attention to detail and analytical skills are unmatched!" - <strong>John Doe, Cybersecurity Expert</strong></p>
      <p>"Her passion for cybersecurity is evident in her work." - <strong>Jane Smith, SOC Manager</strong></p>
    </section>

    <section class="section" id="checkpoint-map">
      <h2>Live Threat Map (Check Point)</h2>
      <iframe 
        src="https://threatmap.checkpoint.com/" 
        width="100%" 
        height="600" 
        style="border:2px solid #00ffee; border-radius:10px; box-shadow:0 0 10px #00ffee; background-color: black;">
      </iframe>
    </section>

    <section class="section" id="chart">
      <h2>Cyber Threat Analysis</h2>
      <div style="width:100%;max-width:800px;margin:auto;">
        <canvas id="threatChart" height="200"></canvas>
      </div>
    </section>

    <section class="section" id="map-section">
      <h2>Global Threat Locations</h2>
      <div id="map" style="height: 400px; border: 1px solid #0ff; border-radius: 8px;"></div>
      <button id="clear-map">üßπ Clear Map</button>
    </section>

    <section class="section" id="contact">
      <h2 data-translate="nav-contact">Contact</h2>
      
      <!-- Contact Form -->
      <form id="contact-form">
        <div class="form-group">
          <label for="contact-name" class="form-label" data-translate="contact-name">Name:</label>
          <input type="text" id="contact-name" name="name" required class="form-input" />
        </div>
        
        <div class="form-group">
          <label for="contact-email" class="form-label" data-translate="contact-email">Email:</label>
          <input type="email" id="contact-email" name="email" required class="form-input" />
        </div>
        
        <div class="form-group">
          <label for="contact-subject" class="form-label" data-translate="contact-subject">Subject:</label>
          <input type="text" id="contact-subject" name="subject" required class="form-input" />
        </div>
        
        <div class="form-group large">
          <label for="contact-message" class="form-label" data-translate="contact-message">Message:</label>
          <textarea id="contact-message" name="message" rows="5" required class="form-textarea"></textarea>
        </div>
        
        <button type="submit" class="button" data-translate="contact-send">
          üìß Send Message
        </button>
      </form>
      
      <div id="contact-result"></div>
      
      <!-- Contact Buttons -->
      <div class="contact-buttons">
        <a href="portfolios Stella.docx" download class="button" data-translate="contact-download">üì• Download Portfolio</a>
        <a href="https://www.linkedin.com/in/stella-s-95ba5683/" class="button" data-translate="contact-linkedin">üîó LinkedIn</a>
      </div>
    </section>
  </main>

  <!-- Map initialization will be handled in main script section -->
  <script>
    (function () {
  const logOutput = document.getElementById('log-output');
  const toggleBtn = document.getElementById('toggle-logs');
  let paused = false;
  let logInterval;

  const logs = [
    "[INFO]  Connection from 192.168.1.10 accepted.",
    "[ALERT]  Suspicious login attempt detected from 203.0.113.5.",
    "[WARNING]  Multiple failed logins for user 'admin'.",
    "[INFO]  Malware signature updated successfully.",
    "[CRITICAL]  Ransomware activity detected on host 10.0.0.23.",
    "[INFO]  Outbound traffic to 8.8.8.8 allowed.",
    "[ALERT]  Phishing email detected and quarantined.",
    "[INFO]  User 'stella' changed password.",
    "[WARNING]  Unusual data transfer detected.",
    "[INFO]  System scan completed. No threats found.",
    "[NOTICE]  New device registered: 10.1.1.5.",
    "[DEBUG]  Packet dropped due to invalid checksum.",
    "[ERROR]  Failed to update antivirus definitions.",
    "[SUCCESS]  Backup completed successfully.",
    "[FAIL]  Backup failed: disk full.",
    "[INFO]  User 'admin' logged out.",
    "[ALERT]  Port scan detected from 185.23.44.12.",
    "[CRITICAL]  Data exfiltration attempt blocked.",
    "[WARNING]  High CPU usage detected on server01.",
    "[NOTICE]  Scheduled maintenance started.",
    "[SUCCESS]  Patch applied to all endpoints."
  ];

  function addLog() {
    if (!paused) {
      const log = logs[Math.floor(Math.random() * logs.length)];
      const now = new Date().toLocaleTimeString();

    
      let color = "#00ffee";
      if (log.includes("CRITICAL")) color = "#ff1744";
      else if (log.includes("ALERT")) color = "#ffea00";
      else if (log.includes("WARNING")) color = "#ff9100";
      else if (log.includes("ERROR") || log.includes("FAIL")) color = "#ff1744";
      else if (log.includes("SUCCESS")) color = "#00e676";
      else if (log.includes("NOTICE")) color = "#00b0ff";
      else if (log.includes("DEBUG")) color = "#bdbdbd";
      else if (log.includes("INFO")) color = "#00ffee";

     
      const span = document.createElement('span');
      span.textContent = `[${now}] ${log}\n`;
      span.style.color = color;
      logOutput.appendChild(span);
      logOutput.scrollTop = logOutput.scrollHeight;
    }
  }

  function startLogs() {
    logInterval = setInterval(addLog, 1200);
  }

  function stopLogs() {
    clearInterval(logInterval);
  }

  if (logOutput && toggleBtn) {
    startLogs();
    toggleBtn.addEventListener('click', function () {
      paused = !paused;
      if (paused) {
        stopLogs();
        toggleBtn.textContent = "‚ñ∂ Resume Logs";
      } else {
        startLogs();
        toggleBtn.textContent = "‚è∏ Pause Logs";
      }
    });
  }
})();
  </script>

  <script>
// Enhanced Attack Simulation Lab
document.addEventListener("DOMContentLoaded", function () {
  const buttons = document.querySelectorAll('#attack-buttons .attack-button');
  const resultDiv = document.getElementById('attack-result');
  const titleDiv = document.getElementById('attack-title');
  const descriptionDiv = document.getElementById('attack-description');
  const stepsDiv = document.getElementById('attack-steps');
  const logOutput = document.getElementById('log-output');
  const threatChart = window.threatChartInstance;
  const mapDiv = document.getElementById('map');

  // Detailed attack scenarios by language
  const attackScenarios = {
    en: {
      "phishing": {
        title: "üìß Phishing Attack - Detection and Blocking",
        description: "Malicious email attempts to extract sensitive information from employees",
        steps: [
          { icon: "üìß", text: "Suspicious email with fake link received", status: "detecting", statusText: "DETECTING" },
          { icon: "üîç", text: "Email Security Gateway scans content", status: "detecting", statusText: "ANALYSIS" },
          { icon: "‚ö†Ô∏è", text: "Phishing URL detected in email", status: "alert", statusText: "ALERT" },
          { icon: "üö´", text: "Email automatically quarantined", status: "blocking", statusText: "BLOCKED" },
          { icon: "‚úÖ", text: "SOC team notified and incident documented", status: "success", statusText: "PROTECTED" }
        ],
        logMessage: "[ALERT] Phishing email detected and quarantined by system",
        location: [51.5, -0.09],
        chartIndex: 0
      },
      "brute-force": {
        title: "üîì Brute Force Attack - Account Protection",
        description: "Hacker attempts to crack passwords through multiple login attempts",
        steps: [
          { icon: "üîë", text: "Multiple failed login attempts detected", status: "detecting", statusText: "DETECTING" },
          { icon: "üìä", text: "Analysis of frequency and pattern of attempts", status: "detecting", statusText: "ANALYSIS" },
          { icon: "üö®", text: "Brute force attack identified from IP: 185.23.44.12", status: "alert", statusText: "THREAT" },
          { icon: "üõ°Ô∏è", text: "IP address temporarily blocked", status: "blocking", statusText: "BLOCKED" },
          { icon: "‚úÖ", text: "Account locked and administrator notified", status: "success", statusText: "PROTECTED" }
        ],
        logMessage: "[WARNING] Brute force attack blocked - IP temporarily blocked",
        location: [40.7, -74.0],
        chartIndex: 4
      },
      "malware": {
        title: "ü¶† Malware Attack - Isolation and Removal",
        description: "Malicious file attempts to infect the system",
        steps: [
          { icon: "üìÅ", text: "File with suspicious signature uploaded", status: "detecting", statusText: "DETECTING" },
          { icon: "üî¨", text: "Antivirus system scans file", status: "detecting", statusText: "SCANNING" },
          { icon: "‚ò£Ô∏è", text: "Malware detected - Trojan horse", status: "alert", statusText: "THREAT" },
          { icon: "üîí", text: "File isolated in quarantine", status: "blocking", statusText: "ISOLATED" },
          { icon: "‚úÖ", text: "System cleaned and protected", status: "success", statusText: "CLEANED" }
        ],
        logMessage: "[CRITICAL] Malware detected and isolated successfully",
        location: [48.85, 2.35],
        chartIndex: 1
      },
      "ddos": {
        title: "‚ö° DDoS Attack - Traffic Protection",
        description: "Massive traffic attempts to overload servers",
        steps: [
          { icon: "üìà", text: "Abnormally high traffic detected to server", status: "detecting", statusText: "DETECTING" },
          { icon: "üìä", text: "Traffic analysis and threat identification", status: "detecting", statusText: "ANALYSIS" },
          { icon: "üåä", text: "DDoS attack confirmed from multiple IP addresses", status: "alert", statusText: "ATTACK" },
          { icon: "üõ°Ô∏è", text: "DDoS protection activated - traffic filtering", status: "blocking", statusText: "PROTECTION" },
          { icon: "‚úÖ", text: "Traffic normalized, services stable", status: "success", statusText: "STABLE" }
        ],
        logMessage: "[ALERT] DDoS attack neutralized - traffic filtered",
        location: [35.68, 139.76],
        chartIndex: 3
      }
    },
    fr: {
      "phishing": {
        title: "üìß Attaque de Phishing - D√©tection et Blocage",
        description: "Email malveillant tentant d'extraire des informations sensibles des employ√©s",
        steps: [
          { icon: "üìß", text: "Email suspect avec lien falsifi√© re√ßu", status: "detecting", statusText: "D√âTECTION" },
          { icon: "üîç", text: "La passerelle de s√©curit√© email analyse le contenu", status: "detecting", statusText: "ANALYSE" },
          { icon: "‚ö†Ô∏è", text: "URL de phishing d√©tect√©e dans l'email", status: "alert", statusText: "ALERTE" },
          { icon: "üö´", text: "Email automatiquement mis en quarantaine", status: "blocking", statusText: "BLOQU√â" },
          { icon: "‚úÖ", text: "√âquipe SOC notifi√©e et incident document√©", status: "success", statusText: "PROT√âG√â" }
        ],
        logMessage: "[ALERTE] Email de phishing d√©tect√© et mis en quarantaine",
        location: [51.5, -0.09],
        chartIndex: 0
      },
      "brute-force": {
        title: "üîì Attaque Brute Force - Protection des Comptes",
        description: "Le pirate tente de casser les mots de passe par des tentatives multiples",
        steps: [
          { icon: "üîë", text: "Multiples tentatives de connexion √©chou√©es d√©tect√©es", status: "detecting", statusText: "D√âTECTION" },
          { icon: "üìä", text: "Analyse de la fr√©quence et du motif des tentatives", status: "detecting", statusText: "ANALYSE" },
          { icon: "üö®", text: "Attaque brute force identifi√©e depuis IP: 185.23.44.12", status: "alert", statusText: "MENACE" },
          { icon: "üõ°Ô∏è", text: "Adresse IP temporairement bloqu√©e", status: "blocking", statusText: "BLOQU√â" },
          { icon: "‚úÖ", text: "Compte verrouill√© et administrateur notifi√©", status: "success", statusText: "PROT√âG√â" }
        ],
        logMessage: "[AVERTISSEMENT] Attaque brute force bloqu√©e - IP temporairement bloqu√©e",
        location: [40.7, -74.0],
        chartIndex: 4
      },
      "malware": {
        title: "ü¶† Attaque Malware - Isolation et Suppression",
        description: "Fichier malveillant tent–∞–Ωt d'infecter le syst√®me",
        steps: [
          { icon: "üìÅ", text: "Fichier avec signature suspecte t√©l√©charg√©", status: "detecting", statusText: "D√âTECTION" },
          { icon: "üî¨", text: "Le syst√®me antivirus analyse le fichier", status: "detecting", statusText: "ANALYSE" },
          { icon: "‚ò£Ô∏è", text: "Malware d√©tect√© - Cheval de Troie", status: "alert", statusText: "MENACE" },
          { icon: "üîí", text: "Fichier isol√© en quarantaine", status: "blocking", statusText: "ISOL√â" },
          { icon: "‚úÖ", text: "Syst√®me nettoy√© et prot√©g√©", status: "success", statusText: "NETTOY√â" }
        ],
        logMessage: "[CRITIQUE] Malware d√©tect√© et isol√© avec succ√®s",
        location: [48.85, 2.35],
        chartIndex: 1
      },
      "ddos": {
        title: "‚ö° Attaque DDoS - Protection du Trafic",
        description: "Trafic massif tentant de surcharger les serveurs",
        steps: [
          { icon: "üìà", text: "Trafic anormalement √©lev√© d√©tect√© vers le serveur", status: "detecting", statusText: "D√âTECTION" },
          { icon: "üìä", text: "Analyse du trafic et identification de la menace", status: "detecting", statusText: "ANALYSE" },
          { icon: "üåä", text: "Attaque DDoS confirm√©e depuis plusieurs adresses IP", status: "alert", statusText: "ATTAQUE" },
          { icon: "üõ°Ô∏è", text: "Protection DDoS activ√©e - filtrage du trafic", status: "blocking", statusText: "PROTECTION" },
          { icon: "‚úÖ", text: "Trafic normalis√©, services stables", status: "success", statusText: "STABLE" }
        ],
        logMessage: "[ALERTE] Attaque DDoS neutralis√©e - trafic filtr√©",
        location: [35.68, 139.76],
        chartIndex: 3
      }
    },
    bg: {
      "phishing": {
        title: "üìß –§–∏—à–∏–Ω–≥ –ê—Ç–∞–∫–∞ - –î–µ—Ç–µ–∫—Ü–∏—è –∏ –ë–ª–æ–∫–∏—Ä–∞–Ω–µ",
        description: "–ó–ª–æ–Ω–∞–º–µ—Ä–µ–Ω –∏–º–µ–π–ª —Å–µ –æ–ø–∏—Ç–≤–∞ –¥–∞ –∏–∑–≤–ª–µ—á–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç —Å–ª—É–∂–∏—Ç–µ–ª–∏",
        steps: [
          { icon: "üìß", text: "–ü–æ–ª—É—á–µ–Ω –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª–µ–Ω –∏–º–µ–π–ª —Å —Ñ–∞–ª—à–∏–≤–∞ –≤—Ä—ä–∑–∫–∞", status: "detecting", statusText: "–î–ï–¢–ï–ö–¢–ò–†–ê–ù–ï" },
          { icon: "üîç", text: "Email Security Gateway —Å–∫–∞–Ω–∏—Ä–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ", status: "detecting", statusText: "–ê–ù–ê–õ–ò–ó" },
          { icon: "‚ö†Ô∏è", text: "–û—Ç–∫—Ä–∏—Ç —Ñ–∏—à–∏–Ω–≥ URL –≤ –∏–º–µ–π–ª–∞", status: "alert", statusText: "–ê–õ–ê–†–ú–ê" },
          { icon: "üö´", text: "–ò–º–µ–π–ª—ä—Ç –µ –∫–∞—Ä–∞–Ω—Ç–∏–Ω–∏—Ä–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ", status: "blocking", statusText: "–ë–õ–û–ö–ò–†–ê–ù–ï" },
          { icon: "‚úÖ", text: "SOC –µ–∫–∏–ø—ä—Ç –µ —É–≤–µ–¥–æ–º–µ–Ω –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ä—Ç –µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–∞–Ω", status: "success", statusText: "–ó–ê–©–ò–¢–ï–ù" }
        ],
        logMessage: "[ALERT] –§–∏—à–∏–Ω–≥ –∏–º–µ–π–ª –¥–µ—Ç–µ–∫—Ç–∏—Ä–∞–Ω –∏ –∫–∞—Ä–∞–Ω—Ç–∏–Ω–∏—Ä–∞–Ω –æ—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∞",
        location: [51.5, -0.09],
        chartIndex: 0
      },
      "brute-force": {
        title: "üîì –ë—Ä—É—Ç –§–æ—Ä—Å –ê—Ç–∞–∫–∞ - –ó–∞—â–∏—Ç–∞ –Ω–∞ –ê–∫–∞—É–Ω—Ç–∏",
        description: "–•–∞–∫–µ—Ä —Å–µ –æ–ø–∏—Ç–≤–∞ –¥–∞ —Ä–∞–∑–±–∏–µ –ø–∞—Ä–æ–ª–∏ —á—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–ø–∏—Ç–∏ –∑–∞ –≤—Ö–æ–¥",
        steps: [
          { icon: "üîë", text: "–î–µ—Ç–µ–∫—Ç–∏—Ä–∞–Ω–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ—É—Å–ø–µ—à–Ω–∏ –æ–ø–∏—Ç–∏ –∑–∞ –≤—Ö–æ–¥", status: "detecting", statusText: "–î–ï–¢–ï–ö–¢–ò–†–ê–ù–ï" },
          { icon: "üìä", text: "–ê–Ω–∞–ª–∏–∑ –Ω–∞ —á–µ—Å—Ç–æ—Ç–∞—Ç–∞ –∏ –æ–±—Ä–∞–∑–µ—Ü–∞ –Ω–∞ –æ–ø–∏—Ç–∏—Ç–µ", status: "detecting", statusText: "–ê–ù–ê–õ–ò–ó" },
          { icon: "üö®", text: "–ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–∞ –±—Ä—É—Ç —Ñ–æ—Ä—Å –∞—Ç–∞–∫–∞ –æ—Ç IP: 185.23.44.12", status: "alert", statusText: "–ó–ê–ü–õ–ê–•–ê" },
          { icon: "üõ°Ô∏è", text: "IP –∞–¥—Ä–µ—Å—ä—Ç –µ –±–ª–æ–∫–∏—Ä–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ", status: "blocking", statusText: "–ë–õ–û–ö–ò–†–ê–ù–ï" },
          { icon: "‚úÖ", text: "–ê–∫–∞—É–Ω—Ç—ä—Ç –µ –∑–∞–∫–ª—é—á–µ–Ω –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ä—Ç –µ —É–≤–µ–¥–æ–º–µ–Ω", status: "success", statusText: "–ó–ê–©–ò–¢–ï–ù" }
        ],
        logMessage: "[WARNING] –ë—Ä—É—Ç —Ñ–æ—Ä—Å –∞—Ç–∞–∫–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–∞ - IP –≤—Ä–µ–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä–∞–Ω",
        location: [40.7, -74.0],
        chartIndex: 4
      },
      "malware": {
        title: "ü¶† –ú–∞–ª—É–µ—Ä –ê—Ç–∞–∫–∞ - –ò–∑–æ–ª–∞—Ü–∏—è –∏ –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ",
        description: "–ó–ª–æ–Ω–∞–º–µ—Ä–µ–Ω —Ñ–∞–π–ª —Å–µ –æ–ø–∏—Ç–≤–∞ –¥–∞ –∑–∞—Ä–∞–∑–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞",
        steps: [
          { icon: "üìÅ", text: "–ö–∞—á–µ–Ω —Ñ–∞–π–ª —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞", status: "detecting", statusText: "–î–ï–¢–ï–ö–¢–ò–†–ê–ù–ï" },
          { icon: "üî¨", text: "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–∫–∞–Ω–∏—Ä–∞ —Ñ–∞–π–ª–∞", status: "detecting", statusText: "–°–ö–ê–ù–ò–†–ê–ù–ï" },
          { icon: "‚ò£Ô∏è", text: "–û—Ç–∫—Ä–∏—Ç –º–∞–ª—É–µ—Ä - –¢—Ä–æ—è–Ω—Å–∫–∏ –∫–æ–Ω", status: "alert", statusText: "–ó–ê–ü–õ–ê–•–ê" },
          { icon: "üîí", text: "–§–∞–π–ª—ä—Ç –µ –∏–∑–æ–ª–∏—Ä–∞–Ω –≤ –∫–∞—Ä–∞–Ω—Ç–∏–Ω–∞", status: "blocking", statusText: "–ò–ó–û–õ–ê–¶–ò–Ø" },
          { icon: "‚úÖ", text: "–°–∏—Å—Ç–µ–º–∞—Ç–∞ –µ –ø–æ—á–∏—Å—Ç–µ–Ω–∞ –∏ –∑–∞—â–∏—Ç–µ–Ω–∞", status: "success", statusText: "–û–ß–ò–°–¢–ï–ù–ê" }
        ],
        logMessage: "[CRITICAL] –ú–∞–ª—É–µ—Ä –¥–µ—Ç–µ–∫—Ç–∏—Ä–∞–Ω –∏ –∏–∑–æ–ª–∏—Ä–∞–Ω–∏ —É—Å–ø–µ—à–Ω–æ",
        location: [48.85, 2.35],
        chartIndex: 1
      },
      "ddos": {
        title: "‚ö° DDoS –ê—Ç–∞–∫–∞ - –ó–∞—â–∏—Ç–∞ –Ω–∞ –¢—Ä–∞—Ñ–∏–∫–∞",
        description: "–ú–∞—Å–∏–≤–µ–Ω —Ç—Ä–∞—Ñ–∏–∫ —Å–µ –æ–ø–∏—Ç–≤–∞ –¥–∞ –ø—Ä–µ—Ç–æ–≤–∞—Ä–∏ —Å—ä—Ä–≤—ä—Ä–∏—Ç–µ",
        steps: [
          { icon: "üìà", text: "–î–µ—Ç–µ–∫—Ç–∏—Ä–∞–Ω –∞–Ω–æ–º–∞–ª–Ω–æ –≤–∏—Å–æ–∫ —Ç—Ä–∞—Ñ–∏–∫ –∫—ä–º —Å—ä—Ä–≤—ä—Ä–∞", status: "detecting", statusText: "–î–ï–¢–ï–ö–¢–ò–†–ê–ù–ï" },
          { icon: "üìä", text: "–ê–Ω–∞–ª–∏–∑ –Ω–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –∑–∞–ø–ª–∞—Ö–∞—Ç–∞", status: "detecting", statusText: "–ê–ù–ê–õ–ò–ó" },
          { icon: "üåä", text: "–ü–æ—Ç–≤—ä—Ä–¥–µ–Ω–∞ DDoS –∞—Ç–∞–∫–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ IP –∞–¥—Ä–µ—Å–∏", status: "alert", statusText: "–ê–¢–ê–ö–ê" },
          { icon: "üõ°Ô∏è", text: "DDoS –∑–∞—â–∏—Ç–∞—Ç–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞ - —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Ç—Ä–∞—Ñ–∏–∫–∞", status: "blocking", statusText: "–ó–ê–©–ò–¢–ê" },
          { icon: "‚úÖ", text: "–¢—Ä–∞—Ñ–∏–∫—ä—Ç –µ –Ω–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω, —É—Å–ª—É–≥–∏—Ç–µ —Å–∞ —Å—Ç–∞–±–∏–ª–Ω–∏", status: "success", statusText: "–°–¢–ê–ë–ò–õ–ù–û" }
        ],
        logMessage: "[ALERT] DDoS –∞—Ç–∞–∫–∞ –Ω–µ—É—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ - —Ç—Ä–∞—Ñ–∏–∫—ä—Ç –µ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω",
        location: [35.68, 139.76],
        chartIndex: 3
      }
    }
  };

  let currentSimulation = null;

  buttons.forEach(btn => {
    btn.addEventListener('click', function () {
      const attackType = btn.getAttribute('data-attack');
      
      // Remove active class from all buttons
      buttons.forEach(b => b.classList.remove('active'));
      // Add active class to clicked button
      btn.classList.add('active');
      
      // Start simulation
      startAttackSimulation(attackType);
    });
  });

  function startAttackSimulation(attackType) {
    const currentScenarios = attackScenarios[currentLanguage] || attackScenarios['en'];
    const scenario = currentScenarios[attackType];
    if (!scenario) return;

    currentSimulation = attackType;
    
    // Show result container
    resultDiv.style.display = 'block';
    
    // Set title and description
    titleDiv.textContent = scenario.title;
    descriptionDiv.innerHTML = `<p><strong>${currentLanguage === 'bg' ? '–°—Ü–µ–Ω–∞—Ä–∏–π:' : currentLanguage === 'fr' ? 'Sc√©nario:' : 'Scenario:'}</strong> ${scenario.description}</p>`;
    
    // Clear previous steps
    stepsDiv.innerHTML = '';
    
    // Add steps with animation delay
    scenario.steps.forEach((step, index) => {
      setTimeout(() => {
        const stepElement = document.createElement('div');
        stepElement.className = 'attack-step';
        stepElement.innerHTML = `
          <div class="step-icon">${step.icon}</div>
          <div class="step-text">${step.text}</div>
          <div class="step-status status-${step.status}">${step.statusText}</div>
        `;
        stepsDiv.appendChild(stepElement);
        
        // Add to log
        if (logOutput) {
          const now = new Date().toLocaleTimeString();
          const span = document.createElement('span');
          span.textContent = `[${now}] ${step.text}\n`;
          span.style.color = getStatusColor(step.status);
          logOutput.appendChild(span);
          logOutput.scrollTop = logOutput.scrollHeight;
        }
      }, index * 800);
    });
    
    // Add final log message
    setTimeout(() => {
      if (logOutput) {
        const now = new Date().toLocaleTimeString();
        const span = document.createElement('span');
        span.textContent = `[${now}] ${scenario.logMessage}\n`;
        span.style.color = '#00e676';
        logOutput.appendChild(span);
        logOutput.scrollTop = logOutput.scrollHeight;
      }
      
      // Update chart
      if (window.threatChartInstance && scenario.chartIndex !== undefined) {
        window.threatChartInstance.data.datasets[0].data[scenario.chartIndex] += 1;
        window.threatChartInstance.update();
      }
      
      // Update map
      if (mapDiv && window.L && scenario.location) {
        if (!window.attackSimMap) {
          window.attackSimMap = L.map('map').setView([42.7, 23.3], 3);
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '¬© OpenStreetMap contributors'
          }).addTo(window.attackSimMap);
        }
        
        const popupText = currentLanguage === 'bg' ? `${attackType.charAt(0).toUpperCase() + attackType.slice(1)} –∞—Ç–∞–∫–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–∞` :
                         currentLanguage === 'fr' ? `Attaque ${attackType} bloqu√©e` :
                         `${attackType.charAt(0).toUpperCase() + attackType.slice(1)} attack blocked`;
        
        L.marker(scenario.location).addTo(window.attackSimMap)
          .bindPopup(popupText)
          .openPopup();
      }
    }, scenario.steps.length * 800 + 1000);
  }

  function getStatusColor(status) {
    switch(status) {
      case 'detecting': return '#ffea00';
      case 'blocking': return '#ff9100';
      case 'success': return '#00e676';
      case 'alert': return '#ff1744';
      default: return '#00ffee';
    }
  }
}); 
  </script>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const ctx = document.getElementById('threatChart').getContext('2d');
  window.threatChartInstance = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Phishing', 'Malware', 'Ransomware', 'DDoS', 'Brute Force'],
      datasets: [{
        label: 'Detected Threats',
        data: [12, 8, 4, 10, 6], 
        backgroundColor: [
          '#00ffeecc',
          '#ff00ccbb',
          '#ffaa00bb',
          '#00ff88bb',
          '#ffea00bb'
        ],
        borderColor: '#00ffee',
        borderWidth: 2
      }]
    },
    options: {
      plugins: {
        legend: { display: false }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: { color: '#00ffee' },
          grid: { color: '#222' }
        },
        x: {
          ticks: { color: '#00ffee' },
          grid: { color: '#222' }
        }
      }
    }
  });
});
</script>
<script>
let openPhishList = [];

fetch('openphish.txt')
  .then(res => res.text())
  .then(text => {
    openPhishList = text.split('\n').map(url => url.trim()).filter(Boolean);
  });

function normalizeUrl(url) {
  return url.trim().replace(/^https?:\/\//i, '').replace(/\/$/, '').toLowerCase();
}

async function checkPhishing(url) {
  const testUrl = normalizeUrl(url);
  return openPhishList.some(phishUrl => normalizeUrl(phishUrl) === testUrl);
}

document.getElementById('phishing-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const url = document.getElementById('url').value;
  const resultDiv = document.getElementById('phishing-result');
  const translation = translations[currentLanguage] || translations['en'];
  
  resultDiv.textContent = translation['phishing-checking'] || 'Checking...';
  const isPhishing = await checkPhishing(url);
  if (isPhishing) {
    resultDiv.textContent = translation['phishing-dangerous'] || '‚ö†Ô∏è Dangerous/phishing site!';
    resultDiv.style.color = 'red';
  } else {
    resultDiv.textContent = translation['phishing-safe'] || '‚úÖ The site appears safe.';
    resultDiv.style.color = 'lime';
  }
});
</script>
<script>
// Contact Form Handler with Multi-language Support
document.addEventListener("DOMContentLoaded", function () {
  const contactForm = document.getElementById('contact-form');
  const contactResult = document.getElementById('contact-result');
  
  if (contactForm && contactResult) {
    contactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const translation = translations[currentLanguage] || translations['en'];
      
      // Show loading message
      contactResult.style.display = 'block';
      contactResult.textContent = translation['contact-sending'] || 'Sending message...';
      contactResult.style.color = '#ffea00';
      
      // Simulate form submission (since this is a static site)
      setTimeout(() => {
        contactResult.textContent = translation['contact-success'] || '‚úÖ Message sent successfully! I will get back to you soon.';
        contactResult.style.color = '#00e676';
        
        // Clear form
        contactForm.reset();
        
        // Hide message after 5 seconds
        setTimeout(() => {
          contactResult.style.display = 'none';
        }, 5000);
      }, 1500);
    });
  }
});
</script>
<script>
// Multi-language Support
const translations = {
  en: {
    'nav-about': 'About Me',
    'nav-projects': 'Projects',
    'nav-charts': 'Charts',
    'nav-aichat': 'ü§ñ AI Chat',
    'nav-livemap': 'Live Map',
    'nav-testimonials': 'Testimonials',
    'nav-contact': 'Contact',
    'nav-report': 'üìÑ Report (EN ‚Äì PDF)',
    'nav-presentation': 'üìä View Pentest Presentation',
    'about-description': 'SOC Analyst | Cybersecurity Enthusiast | Threat Hunter',
    'projects-title': 'Projects',
    'project-threatmap': 'üîç Cyber Threat Map',
    'project-phishing': 'üìß Check for Phishing',
    'project-hunting': 'üß† Threat Hunting',
    'project-live': 'üåê Threat Live',
    'project-cv': 'üìÑ My CV',
    'phishing-title': 'Phishing URL Checker',
    'phishing-label': 'Enter URL to check:',
    'phishing-button': 'Check',
    'phishing-note': 'Note: This is a simulation and does not perform actual phishing detection.',
    'phishing-checking': 'Checking...',
    'phishing-dangerous': '‚ö†Ô∏è Dangerous/phishing site!',
    'phishing-safe': '‚úÖ The site appears safe.',
    'contact-name': 'Name:',
    'contact-email': 'Email:',
    'contact-subject': 'Subject:',
    'contact-message': 'Message:',
    'contact-send': 'üìß Send Message',
    'contact-sending': 'Sending message...',
    'contact-success': '‚úÖ Message sent successfully! I will get back to you soon.',
    'contact-download': 'üì• Download Portfolio',
    'contact-linkedin': 'üîó LinkedIn',
    'lab-title': 'üî¨ Attack Simulation Lab',
    'lab-description': 'Select an attack type to simulate and observe how the SOC team detects and blocks it:',
    'lab-phishing-desc': 'Phishing Attack',
    'lab-bruteforce-desc': 'Brute Force Attack',
    'lab-malware-desc': 'Malware Attack',
    'lab-ddos-desc': 'DDoS Attack',
    'aichat-title': 'ü§ñ CyberSec AI Chat',
    'aichat-description': 'Ask our AI assistant about cybersecurity topics, threats, and best practices.',
    'aichat-send': 'Send',
    'aichat-welcome': 'Ask our AI assistant about cybersecurity topics, threats, and best practices.'
  },
  fr: {
    'nav-about': '√Ä Propos',
    'nav-projects': 'Projets',
    'nav-charts': 'Graphiques',
    'nav-aichat': 'ü§ñ Chat IA',
    'nav-livemap': 'Carte en Direct',
    'nav-testimonials': 'T√©moignages',
    'nav-contact': 'Contact',
    'nav-report': 'üìÑ Rapport (FR ‚Äì PDF)',
    'nav-presentation': 'üìä Voir Pr√©sentation Pentest',
    'about-description': 'Analyste SOC | Passionn√©e de Cybers√©curit√© | Chasseuse de Menaces',
    'projects-title': 'Projets',
    'project-threatmap': 'üîç Carte des Menaces Cyber',
    'project-phishing': 'üìß V√©rifier le Phishing',
    'project-hunting': 'üß† Chasse aux Menaces',
    'project-live': 'üåê Menaces en Direct',
    'project-cv': 'üìÑ Mon CV',
    'phishing-title': 'V√©rificateur d\'URL de Phishing',
    'phishing-label': 'Entrez l\'URL √† v√©rifier:',
    'phishing-button': 'V√©rifier',
    'phishing-note': 'Note: Ceci est une simulation et ne d√©tecte pas r√©ellement le phishing.',
    'phishing-checking': 'V√©rification...',
    'phishing-dangerous': '‚ö†Ô∏è Site dangereux/phishing !',
    'phishing-safe': '‚úÖ Le site semble s√ªr.',
    'contact-name': 'Nom:',
    'contact-email': 'Email:',
    'contact-subject': 'Sujet:',
    'contact-message': 'Message:',
    'contact-send': 'üìß Envoyer Message',
    'contact-sending': 'Envoi du message...',
    'contact-success': '‚úÖ Message envoy√© avec succ√®s! Je vous r√©pondrai bient√¥t.',
    'contact-download': 'üì• T√©l√©charger Portfolio',
    'contact-linkedin': 'üîó LinkedIn',
    'lab-title': 'üî¨ Laboratoire de Simulation d\'Attaques',
    'lab-description': 'S√©lectionnez un type d\'attaque √† simuler –∏ observez comment l\'√©quipe SOC la d√©tecte et la bloque:',
    'lab-phishing-desc': 'Attaque de Phishing',
    'lab-bruteforce-desc': 'Attaque Brute Force',
    'lab-malware-desc': 'Attaque Malware',
    'lab-ddos-desc': 'Attaque DDoS',
    'aichat-title': 'ü§ñ Chat IA CyberSec',
    'aichat-description': 'Demandez √† notre assistant IA sur les sujets de cybers√©curit√©, menaces et meilleures pratiques.',
    'aichat-send': 'Envoyer',
    'aichat-welcome': 'Demandez √† notre assistant IA sur les sujets de cybers√©curit√©, menaces et meilleures pratiques.'
  },
  bg: {
    'nav-about': '–ó–∞ –ú–µ–Ω',
    'nav-projects': '–ü—Ä–æ–µ–∫—Ç–∏',
    'nav-charts': '–ì—Ä–∞—Ñ–∏–∫–∏',
    'nav-aichat': 'ü§ñ AI –ß–∞—Ç',
    'nav-livemap': '–ö–∞—Ä—Ç–∞ –Ω–∞ –ñ–∏–≤–æ',
    'nav-testimonials': '–ü—Ä–µ–ø–æ—Ä—ä–∫–∏',
    'nav-contact': '–ö–æ–Ω—Ç–∞–∫—Ç',
    'nav-report': 'üìÑ –î–æ–∫–ª–∞–¥ (BG ‚Äì PDF)',
    'nav-presentation': 'üìä –í–∏–∂ Pentest –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è',
    'about-description': 'SOC –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä | –ï–Ω—Ç—É—Å–∏–∞—Å—Ç –ø–æ –ö–∏–±–µ—Ä—Å–∏–≥—É—Ä–Ω–æ—Å—Ç | –õ–æ–≤–µ—Ü –Ω–∞ –ó–∞–ø–ª–∞—Ö–∏',
    'projects-title': '–ü—Ä–æ–µ–∫—Ç–∏',
    'project-threatmap': 'üîç –ö–∞—Ä—Ç–∞ –Ω–∞ –ö–∏–±–µ—Ä –ó–∞–ø–ª–∞—Ö–∏',
    'project-phishing': 'üìß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –§–∏—à–∏–Ω–≥',
    'project-hunting': 'üß† –õ–æ–≤ –Ω–∞ –ó–∞–ø–ª–∞—Ö–∏',
    'project-live': 'üåê –ó–∞–ø–ª–∞—Ö–∏ –Ω–∞ –ñ–∏–≤–æ',
    'project-cv': 'üìÑ –ú–æ–µ—Ç–æ CV',
    'phishing-title': '–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –§–∏—à–∏–Ω–≥ URL',
    'phishing-label': '–í—ä–≤–µ–¥–µ—Ç–µ URL –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:',
    'phishing-button': '–ü—Ä–æ–≤–µ—Ä–∏',
    'phishing-note': '–ó–∞–±–µ–ª–µ–∂–∫–∞: –¢–æ–≤–∞ –µ —Å–∏–º—É–ª–∞—Ü–∏—è –∏ –Ω–µ –ø—Ä–∞–≤–∏ —Ä–µ–∞–ª–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ —Ñ–∏—à–∏–Ω–≥.',
    'phishing-checking': '–ü—Ä–æ–≤–µ—Ä—è–≤–∞–º...',
    'phishing-dangerous': '‚ö†Ô∏è –û–ø–∞—Å–µ–Ω/—Ñ–∏—à–∏–Ω–≥ —Å–∞–π—Ç!',
    'phishing-safe': '‚úÖ –°–∞–π—Ç—ä—Ç –∏–∑–≥–ª–µ–∂–¥–∞ –±–µ–∑–æ–ø–∞—Å–µ–Ω.',
    'contact-name': '–ò–º–µ:',
    'contact-email': '–ò–º–µ–π–ª:',
    'contact-subject': '–¢–µ–º–∞:',
    'contact-message': '–°—ä–æ–±—â–µ–Ω–∏–µ:',
    'contact-send': 'üìß –ò–∑–ø—Ä–∞—Ç–∏ –°—ä–æ–±—â–µ–Ω–∏–µ',
    'contact-sending': '–ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ...',
    'contact-success': '‚úÖ –°—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! –©–µ —Å–µ —Å–≤—ä—Ä–∂–∞ —Å –≤–∞—Å —Å–∫–æ—Ä–æ.',
    'contact-download': 'üì• –ò–∑—Ç–µ–≥–ª–∏ –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ',
    'contact-linkedin': 'üîó LinkedIn',
    'lab-title': 'üî¨ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –∑–∞ –°–∏–º—É–ª–∞—Ü–∏—è –Ω–∞ –ê—Ç–∞–∫–∏',
    'lab-description': '–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø –∞—Ç–∞–∫–∞ –∑–∞ —Å–∏–º—É–ª–∞—Ü–∏—è –∏ –Ω–∞–±–ª—é–¥–∞–≤–∞–π—Ç–µ –∫–∞–∫ SOC –µ–∫–∏–ø—ä—Ç —è –æ—Ç–∫—Ä–∏–≤–∞ –∏ –±–ª–æ–∫–∏—Ä–∞:',
    'lab-phishing-desc': '–§–∏—à–∏–Ω–≥ –∞—Ç–∞–∫–∞',
    'lab-bruteforce-desc': '–ë—Ä—É—Ç —Ñ–æ—Ä—Å –∞—Ç–∞–∫–∞',
    'lab-malware-desc': '–ó–ª–æ–Ω–∞–º–µ—Ä–µ–Ω —Å–æ—Ñ—Ç—É–µ—Ä',
    'lab-ddos-desc': '–†–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∞—Ç–∞–∫–∞',
    'aichat-title': 'ü§ñ CyberSec AI –ß–∞—Ç',
    'aichat-description': '–ü–æ–ø–∏—Ç–∞–π –Ω–∞—à–∏—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ –∫–∏–±–µ—Ä—Å–∏–≥—É—Ä–Ω–æ—Å—Ç —Ç–µ–º–∏, –∑–∞–ø–ª–∞—Ö–∏ –∏ –Ω–∞–π-–¥–æ–±—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.',
    'aichat-send': '–ò–∑–ø—Ä–∞—Ç–∏',
    'aichat-welcome': '–ü–æ–ø–∏—Ç–∞–π –Ω–∞—à–∏—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ –∫–∏–±–µ—Ä—Å–∏–≥—É—Ä–Ω–æ—Å—Ç —Ç–µ–º–∏, –∑–∞–ø–ª–∞—Ö–∏ –∏ –Ω–∞–π-–¥–æ–±—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.'
  }
};

let currentLanguage = 'en';

function translatePage(language) {
  currentLanguage = language;
  const translation = translations[language];
  
  // Update all elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    if (translation[key]) {
      element.textContent = translation[key];
    }
  });
  
  // Update form placeholders and dynamic content
  updateDynamicContent(language);
  
  // Save language preference
  localStorage.setItem('preferredLanguage', language);
}

function updateDynamicContent(language) {
  const translation = translations[language];
  
  // Update contact form button
  const contactButton = document.querySelector('#contact-form button[type="submit"]');
  if (contactButton && translation['contact-send']) {
    contactButton.textContent = translation['contact-send'];
  }
  
  // Update contact form labels
  const nameLabel = document.querySelector('label[for="contact-name"]');
  if (nameLabel && translation['contact-name']) {
    nameLabel.textContent = translation['contact-name'];
  }
  
  const emailLabel = document.querySelector('label[for="contact-email"]');
  if (emailLabel && translation['contact-email']) {
    emailLabel.textContent = translation['contact-email'];
  }
  
  const subjectLabel = document.querySelector('label[for="contact-subject"]');
  if (subjectLabel && translation['contact-subject']) {
    subjectLabel.textContent = translation['contact-subject'];
  }
  
  const messageLabel = document.querySelector('label[for="contact-message"]');
  if (messageLabel && translation['contact-message']) {
    messageLabel.textContent = translation['contact-message'];
  }
  
  // Update contact buttons
  const downloadBtn = document.querySelector('a[href*="Portfolio"]');
  if (downloadBtn && translation['contact-download']) {
    downloadBtn.textContent = translation['contact-download'];
  }
  
  const linkedinBtn = document.querySelector('a[href*="linkedin"]');
  if (linkedinBtn && translation['contact-linkedin']) {
    linkedinBtn.textContent = translation['contact-linkedin'];
  }
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
  const languageSelect = document.getElementById('language-select');
  
  // Load saved language preference or default to English
  const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
  languageSelect.value = savedLanguage;
  translatePage(savedLanguage);
  
  // Language switcher event listener
  languageSelect.addEventListener('change', function() {
    translatePage(this.value);
  });
});

// Update existing contact form handler to use translations
function updateContactFormWithTranslations() {
  const contactForm = document.getElementById('contact-form');
  const contactResult = document.getElementById('contact-result');
  
  if (contactForm && contactResult) {
    contactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const translation = translations[currentLanguage];
      
      // Show loading message
      contactResult.style.display = 'block';
      contactResult.textContent = translation['contact-sending'] || 'Sending message...';
      contactResult.style.color = '#ffea00';
      
      // Simulate form submission
      setTimeout(() => {
        contactResult.textContent = translation['contact-success'] || '‚úÖ Message sent successfully!';
        contactResult.style.color = '#00e676';
        
        // Clear form
        contactForm.reset();
        
        // Hide message after 5 seconds
        setTimeout(() => {
          contactResult.style.display = 'none';
        }, 5000);
      }, 1500);
    });
  }
}

// Update existing phishing checker to use translations
function updatePhishingCheckerWithTranslations() {
  const phishingForm = document.getElementById('phishing-form');
  
  if (phishingForm) {
    phishingForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      const url = document.getElementById('url').value;
      const resultDiv = document.getElementById('phishing-result');
      const translation = translations[currentLanguage];
      
      resultDiv.textContent = translation['phishing-checking'] || 'Checking...';
      
      // Simulate checking (using existing logic)
      const isPhishing = await checkPhishing(url);
      if (isPhishing) {
        resultDiv.textContent = translation['phishing-dangerous'] || '‚ö†Ô∏è Dangerous/phishing site!';
        resultDiv.style.color = 'red';
      } else {
        resultDiv.textContent = translation['phishing-safe'] || '‚úÖ The site appears safe.';
        resultDiv.style.color = 'lime';
      }
    });
  }
}

// AI Chat functionality with improved error handling
function initializeAIChat() {
  const chatForm = document.getElementById('chat-form');
  const chatPrompt = document.getElementById('chat-prompt');
  const chatMessages = document.getElementById('chat-messages');
  
  if (chatForm && chatPrompt && chatMessages) {
    chatForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const prompt = chatPrompt.value.trim();
      if (!prompt) return;
      
      // Add user message
      addMessage(prompt, 'user');
      
      // Clear input
      chatPrompt.value = '';
      
      // Add typing indicator
      const typingMsg = addMessage('Typing...', 'assistant', true);
      
      try {
        // Try to connect to local AI server with timeout
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout
        
        const response = await fetch('http://127.0.0.1:5000/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt }),
          signal: controller.signal
        });
        
        clearTimeout(timeoutId);
        
        if (!response.ok) {
          throw new Error(`Server error: ${response.status}`);
        }
        
        const data = await response.json();
        
        // Remove typing indicator
        typingMsg.remove();
        
        // Add AI response
        addMessage(data.response || 'No response received.', 'assistant');
        
      } catch (error) {
        // Remove typing indicator
        typingMsg.remove();
        
        // Provide fallback cybersecurity responses silently
        const fallbackResponse = getCyberSecurityResponse(prompt);
        addMessage(fallbackResponse, 'assistant');
        
        // Log error only in development mode (optional)
        // console.debug('AI server not available, using fallback response');
      }
    });
  }
  
  function addMessage(text, sender, isTyping = false) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `chat-message ${sender}`;
    
    const headerDiv = document.createElement('div');
    headerDiv.className = 'message-header';
    headerDiv.textContent = sender === 'user' ? 'üë§ You' : 'ü§ñ AI Assistant';
    
    const contentDiv = document.createElement('div');
    contentDiv.className = 'message-content';
    
    if (isTyping) {
      contentDiv.innerHTML = '<span class="typing-indicator">‚å®Ô∏è Typing...</span>';
    } else {
      contentDiv.textContent = text;
    }
    
    messageDiv.appendChild(headerDiv);
    messageDiv.appendChild(contentDiv);
    
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    return messageDiv;
  }
  
  function getCyberSecurityResponse(prompt) {
    const lowerPrompt = prompt.toLowerCase();
    
    if (lowerPrompt.includes('phishing') || lowerPrompt.includes('—Ñ–∏—à–∏–Ω–≥')) {
      return `üé£ Phishing Protection Tips:

‚Ä¢ Always verify sender identity before clicking links
‚Ä¢ Check URL spelling carefully - look for suspicious domains
‚Ä¢ Never enter personal information via email links
‚Ä¢ Use email security gateways and anti-phishing tools
‚Ä¢ Report suspicious emails to your IT security team
‚Ä¢ Enable 2FA on all important accounts

Remember: When in doubt, don't click out!`;
    }
    
    if (lowerPrompt.includes('malware') || lowerPrompt.includes('–º–∞–ª—É–µ—Ä')) {
      return `ü¶† Malware Defense Strategy:

‚Ä¢ Keep antivirus software updated and active
‚Ä¢ Regular system and software updates
‚Ä¢ Avoid suspicious downloads and email attachments
‚Ä¢ Use application whitelisting when possible
‚Ä¢ Enable real-time protection and behavioral analysis
‚Ä¢ Regular system backups to clean locations
‚Ä¢ Network segmentation to limit spread

Prevention is better than cure!`;
    }
    
    if (lowerPrompt.includes('password') || lowerPrompt.includes('–ø–∞—Ä–æ–ª–∞')) {
      return `üîê Strong Password Guidelines:

‚Ä¢ Minimum 12+ characters length
‚Ä¢ Mix uppercase, lowercase, numbers, symbols
‚Ä¢ Avoid dictionary words and personal info
‚Ä¢ Use unique passwords for each account
‚Ä¢ Enable multi-factor authentication (MFA)
‚Ä¢ Consider password managers
‚Ä¢ Regular password rotation for critical accounts

A strong password is your first line of defense!`;
    }
    
    if (lowerPrompt.includes('ddos') || lowerPrompt.includes('–∞—Ç–∞–∫–∞')) {
      return `‚ö° DDoS Attack Mitigation:

‚Ä¢ Implement rate limiting and traffic filtering
‚Ä¢ Use DDoS protection services (Cloudflare, AWS Shield)
‚Ä¢ Network redundancy and load balancing
‚Ä¢ Monitor traffic patterns for anomalies
‚Ä¢ Have incident response procedures ready
‚Ä¢ Consider CDN services for content delivery
‚Ä¢ Maintain updated blacklists

Preparation and detection are key to defense!`;
    }
    
    if (lowerPrompt.includes('soc') || lowerPrompt.includes('security operations')) {
      return `üè¢ SOC Best Practices:

‚Ä¢ 24/7 continuous monitoring and threat detection
‚Ä¢ SIEM integration for centralized log analysis
‚Ä¢ Incident response playbooks and procedures
‚Ä¢ Threat intelligence integration
‚Ä¢ Regular security awareness training
‚Ä¢ Automated response for common threats
‚Ä¢ Regular drills and tabletop exercises

A well-prepared SOC is a strong defense!`;
    }
    
    // Default cybersecurity response
    return `üõ°Ô∏è Cybersecurity Guidance:

I'm here to help with cybersecurity topics! You can ask me about:

‚Ä¢ Phishing detection and prevention
‚Ä¢ Malware protection strategies
‚Ä¢ Password security best practices
‚Ä¢ DDoS attack mitigation
‚Ä¢ SOC operations and procedures
‚Ä¢ Threat hunting techniques
‚Ä¢ Incident response planning

What specific cybersecurity topic would you like to explore?

Note: For advanced analysis, the AI server can be started locally.`;
  }
}

// Map initialization and other functionality
document.addEventListener("DOMContentLoaded", function () {
  // Initialize Leaflet map safely
  const mapDiv = document.getElementById('map');
  if (mapDiv && !mapDiv._leaflet_id) {
    try {
      const map = L.map('map').setView([42.7, 23.3], 3);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '¬© OpenStreetMap contributors'
      }).addTo(map);

      // Add markers
      L.marker([42.7, 23.3]).addTo(map).bindPopup('Sofia, Bulgaria');
      L.marker([51.5, -0.09]).addTo(map).bindPopup('London, UK');
      L.marker([40.7, -74.0]).addTo(map).bindPopup('New York, USA');
      L.marker([48.85, 2.35]).addTo(map).bindPopup('Paris, France');
      L.marker([35.68, 139.76]).addTo(map).bindPopup('Tokyo, Japan');
      L.marker([55.75, 37.62]).addTo(map).bindPopup('Moscow, Russia');
      L.marker([52.52, 13.40]).addTo(map).bindPopup('Berlin, Germany');
      L.marker([34.05, -118.24]).addTo(map).bindPopup('Los Angeles, USA');
      L.marker([-33.87, 151.21]).addTo(map).bindPopup('Sydney, Australia');
      L.marker([19.43, -99.13]).addTo(map).bindPopup('Mexico City, Mexico');
      
      // Clear map button functionality
      const clearMapBtn = document.getElementById('clear-map');
      if (clearMapBtn) {
        clearMapBtn.addEventListener('click', function() {
          map.eachLayer(function(layer) {
            if (layer instanceof L.Marker) {
              map.removeLayer(layer);
            }
          });
        });
      }
    } catch (error) {
      console.warn('Map initialization error:', error.message);
    }
  }
  
  // Initialize AI Chat
  initializeAIChat();
  
  // Initialize other components
  updateContactFormWithTranslations();
  updatePhishingCheckerWithTranslations();
});

// Particles.js configuration
particlesJS('particles-js', {
  particles: {
    number: { value: 80, density: { enable: true, value_area: 800 } },
    color: { value: '#00ffee' },
    shape: { type: 'circle' },
    opacity: { value: 0.5, random: false },
    size: { value: 3, random: true },
    line_linked: { enable: true, distance: 150, color: '#00ffee', opacity: 0.4, width: 1 },
    move: { enable: true, speed: 6, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
  },
  interactivity: {
    detect_on: 'canvas',
    events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
    modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 200, duration: 0.4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } }
  },
  retina_detect: true
});
</script>
</body>
</html>
